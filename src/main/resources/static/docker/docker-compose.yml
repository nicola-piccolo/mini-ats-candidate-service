version: "3.8"
services:
  candidate-database:
    image: mysql:latest
    expose:
      - 3306
    volumes:
      - ./database-init:/docker-entrypoint-initdb.d
      - candidate-database-data:/var/lib/mysql
    env_file:
      - ./.database-env
    networks: 
      - candidate-network
  candidate-service:
    image: miniats/candidate-service:latest
    ports: 
      - 8080:8080
    volumes:
      - /tmp:/home/candidate-service/logs
    env_file:
      - ./.candidate-env
      - ./.discovery-env
    depends_on:
      - candidate-database
    networks: 
      - candidate-network
      - global-network
volumes:
  candidate-database-data:
networks:
  candidate-network:
  global-network:
    external:
      name: mini-ats-network
